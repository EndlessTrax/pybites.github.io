
<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="google-site-verification" content="lyiNqmFUtae2FGps4eCalBloZekygEIfjiV8tSPrjMY" />
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/stylesheet/style.min.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="//cdn-images.mailchimp.com/embedcode/classic-10_7.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/stylesheet/ribbons.css">
  <link rel="stylesheet" type="text/css" href="https://pybit.es/theme/stylesheet/custom.css">

    <link href="https://pybit.es/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="PyBites Atom">

    <link href="https://pybit.es/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="PyBites RSS">

    <link rel="shortcut icon" href="https://pybit.es/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://pybit.es/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="PyBites" />
<meta name="description" content="It's Friday again so we review the code challenge of this week. It's never late to sign up, just fork our challenges repo and start coding." />
<meta name="keywords" content="codechallenges, code review, github, learning, tags, similarity, blog">
<meta property="og:site_name" content="PyBites"/>
<meta property="og:title" content="Code Challenge 03 - PyBites Blog Tag Analysis - Review"/>
<meta property="og:description" content="It's Friday again so we review the code challenge of this week. It's never late to sign up, just fork our challenges repo and start coding."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://pybit.es/codechallenge03_review.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-01-27 09:00:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://pybit.es/author/pybites.html">
<meta property="article:section" content="Challenges"/>
<meta property="article:tag" content="codechallenges"/>
<meta property="article:tag" content="code review"/>
<meta property="article:tag" content="github"/>
<meta property="article:tag" content="learning"/>
<meta property="article:tag" content="tags"/>
<meta property="article:tag" content="similarity"/>
<meta property="article:tag" content="blog"/>
<meta property="og:image" content="https://pybit.es/images/featured/pb-challenge.png">

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@pybites" />
<meta name="twitter:title" content="Code Challenge 03 - PyBites Blog Tag Analysis - Review" />
<meta name="twitter:description" content="It's Friday again so we review the code challenge of this week. It's never late to sign up, just fork our challenges repo and start coding." />
<meta name="twitter:image" content="https://pybit.es/images/featured/pb-challenge.png">

  <title>PyBites &ndash; Code Challenge 03 - PyBites Blog Tag Analysis - Review</title>


</head>
<body>
<div id="codeChallengeWrapper">

  <div id="codeWithUs">

    <div class="quote-box">
      <div class="quote">

        <img src="https://codechalleng.es/static/img/honors/unlock.png" class="ninja" alt="earn the White PyBites Ninja">
        <img src="https://codechalleng.es/static/img/honors/unlock_yellow.png" class="ninja" alt="earn the Yellow PyBites Ninja">
        <img src="https://codechalleng.es/static/img/honors/unlock_orange.png" class="ninja" alt="earn the Orange PyBites Ninja">
        <img src="https://codechalleng.es/static/img/right-arrow.png" class="ninja" alt="right arrow">
        <img src="https://codechalleng.es/static/img/honors/unlock_red.png" class="ninja" alt="earn more PyBites Ninja belts and certificates">

        <hr>

        <blockquote>
          The best way to learn to <strong>code in Python</strong> is to <strong><a href="https://pybit.es/learn-by-doing.html" target="_blank">actually use the language</a></strong>.
          <br><br>
          Our platform offers <strong>effective Test Driven Learning</strong> which will be key to your progress.
          <br><br><br>
          Join thousands of Pythonistas and start coding!

          <br><br><br>
          <a href="https://codechalleng.es/via/pybites" target="_blank"><img src="https://codechalleng.es/static/img/ghlogin.png" alt="Join us on our PyBites Platform"></a>
        </blockquote>
  
      </div>
    </div>

  </div>

  <button class="center mui-btn mui-btn--flat mui-btn--primary" onclick="document.getElementById('codeWithUs').classList.toggle('open');">
    Land a better Python job? Try our coding platform &raquo;
  </button>

</div><!-- end codeChallengeWrapper -->

  <!-- change ribbon color based on topic -->
  <div class="ribbon right
      red
  ">
    <a href="https://codechalleng.es/via/pybites" target="_blank">Click here to code!</a>
  </div>

  <!-- change aside color based on topic -->
    <aside class='red'>
  
    <div>
      <a href="https://pybit.es">
          <img src="https://pybit.es/theme/img/challenges.png" alt="PyBites" title="PyBites">
      </a>
      <h1><a href="https://pybit.es">PyBites</a></h1>

<h2 id="sitesubtitle">A Community that Masters Python through Code Challenges</h2>
      <nav>
        <ul class="list">
          <li><a href="/pages/articles.html">Articles</a></li>
          <li><a href="/pages/challenges.html">Blog Challenges</a></li>
          <li><a href="https://codechalleng.es/">Python Exercises</a></li>
          <li><a href="https://training.talkpython.fm/courses/explore_100days_web/100-days-of-web-in-python">#100DaysOfCode</a></li>
          <li><a href="/pages/slack.html">Join our Slack</a></li>
          <li><a href="/pages/search.html">Search</a></li>
        </ul>
      </nav>

      <div id='mc-dark'>
<!-- Begin MailChimp Signup Form -->
<hr class="softDivider">
<div id="mc_embed_signup">
<form action="//pybit.us14.list-manage.com/subscribe/post?u=822043293f280259d4b8d2a3e&amp;id=ac7e2eb9ef" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
    
<div class="mc-field-group">
  <p><a href='http://us14.campaign-archive1.com/home/?u=822043293f280259d4b8d2a3e&id=ac7e2eb9ef'>Join our community</a> and grab our <i>Become a Better Python Developer</i> cheat sheet. Learn Python. Receive bonus material. Challenge yourself! (<a href="https://pybit.es/pages/privacy-policy">Privacy Policy</a>)</p>
    <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address">
</div>
    <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_822043293f280259d4b8d2a3e_ac7e2eb9ef" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Join Us" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>
<!--End mc_embed_signup-->                  </div>

      <hr class="softDivider">

      <div id="ninjaWidget">
        <a href="https://codechalleng.es/via/pybites" target="_blank"><img src="https://codechalleng.es/static/img/honors/ninja_widget.png" alt="start earning PyBites Ninja Belts"></a>
      </div>
        
      <ul class="social">
        <li><a href="https://pybit.es/feeds/all.rss.xml" target="_blank"><img src='https://pybit.es/theme/img/socialmedia/rss.png' alt='Our RSS Feed'></a></li>
        <li><a href="https://twitter.com/pybites" target="_blank"><img src='https://pybit.es/theme/img/socialmedia/twitter.png' alt='Follow us on Twitter'></a></li>
        <li><a href="https://github.com/pybites/" target="_blank"><img src='https://pybit.es/theme/img/socialmedia/github.png' alt='Follow us on Github'></a></li>
        <li><a href="https://instagram.com/pybites" target="_blank"><img src='https://pybit.es/theme/img/socialmedia/instagram.png' alt='Follow us on Instagram'></a></li>
        <li><a href="https://www.youtube.com/channel/UCBn-uKDGsRBfcB0lQeOB_gA" target="_blank"><img src='https://pybit.es/theme/img/socialmedia/youtube.png' alt='Follow us on Youtube'></a></li>
        <li><a href="https://www.facebook.com/groups/pybites/" target="_blank"><img src='https://pybit.es/theme/img/socialmedia/facebook.png' alt='Follow us on Facebook'></a></li>
      </ul>

      <br>
      <script src="https://apis.google.com/js/platform.js"></script>

	
    </div>


  </aside>
  <main>
    <div style="width: 100%; margin: 10px 0 0 100px; border-bottom: 1px solid #f2f2f2; padding: 0px;">
      <iframe scrolling="no" frameborder="0" style="margin:0 auto; border:none;" src="https://www.humblebundle.com/_widget//level-up-your-python" width="410" height="150"></iframe>
    </div>


<article class="single">
  <header>
    <h1 id="codechallenge03_review">Code Challenge 03 - PyBites Blog Tag Analysis - Review</h1>
    <p>
          Posted by <a href="https://pybit.es/author/pybites.html">PyBites</a> on Fri 27 January 2017 in <a href="https://pybit.es/category/challenges.html">Challenges</a>


        &#8226; 3 min read
    </p>
  </header>


  <div>
    <p>It's Friday again so we review the <a href="http://pybit.es/codechallenge03.html">code challenge of this week</a>. It's never late to join, just fork our <a href="https://github.com/pybites/challenges">challenges repo</a> and start coding.</p>
<h2>A possible solution</h2>
<p>See <a href="https://github.com/pybites/challenges/blob/solutions/03/tags.py">here</a> and commented below.</p>
<p>Some learnings:</p>
<ul>
<li>
<p>We use the stdlib to its fullest:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">from</span> <span class="nn">difflib</span> <span class="kn">import</span> <span class="n">SequenceMatcher</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">product</span>
<span class="kn">import</span> <span class="nn">re</span>
</pre></div>


</li>
<li>
<p>We define constants at the top. We use maketrans to easily extend replacing multiple characters in the future:</p>
<div class="highlight"><pre><span></span><span class="n">REPLACE_CHARS</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="n">maketrans</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
<span class="n">IDENTICAL</span> <span class="o">=</span> <span class="mi">1</span><span class="p">.</span><span class="mi">0</span>
<span class="n">TOP_NUMBER</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">RSS_FEED</span> <span class="o">=</span> <span class="s1">&#39;rss.xml&#39;</span>
<span class="k">SIMILAR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">.</span><span class="mi">87</span>
</pre></div>


</li>
<li>
<p>We used a regular expression to show that you can. A better way would be to use a PyPI package like feedparser or BeautifulSoup (see further down). </p>
<div class="highlight"><pre><span></span><span class="nv">TAG_HTML</span> <span class="o">=</span> <span class="nv">re</span>.<span class="nv">compile</span><span class="ss">(</span><span class="nv">r</span><span class="s1">&#39;</span><span class="s">&lt;category&gt;([^&lt;]+)&lt;/category&gt;</span><span class="s1">&#39;</span><span class="ss">)</span>

<span class="nv">def</span> <span class="nv">get_tags</span><span class="ss">()</span>:
    <span class="s2">&quot;&quot;&quot;</span><span class="s">Find all tags (TAG_HTML) in RSS_FEED.</span>
    <span class="nv">Replace</span> <span class="nv">dash</span> <span class="nv">with</span> <span class="nv">whitespace</span> <span class="ss">(</span><span class="nv">REPLACE_CHARS</span><span class="ss">)</span><span class="s2">&quot;&quot;&quot;</span>
    <span class="nv">with</span> <span class="nv">open</span><span class="ss">(</span><span class="nv">RSS_FEED</span><span class="ss">)</span> <span class="nv">as</span> <span class="nv">f</span>:
        <span class="nv">tags</span> <span class="o">=</span> <span class="nv">TAG_HTML</span>.<span class="nv">findall</span><span class="ss">(</span><span class="nv">f</span>.<span class="nv">read</span><span class="ss">()</span>.<span class="nv">lower</span><span class="ss">())</span>
    <span class="k">return</span> [<span class="nv">tag</span>.<span class="nv">translate</span><span class="ss">(</span><span class="nv">REPLACE_CHARS</span><span class="ss">)</span> <span class="k">for</span> <span class="nv">tag</span> <span class="nv">in</span> <span class="nv">tags</span>]
</pre></div>


</li>
<li>
<p>For everything counting related you really want to use collections.Counter and its most_common method</p>
<div class="highlight"><pre><span></span><span class="nv">def</span> <span class="nv">get_top_tags</span><span class="ss">(</span><span class="nv">tags</span><span class="ss">)</span>:
    <span class="s2">&quot;&quot;&quot;</span><span class="s">Get the TOP_NUMBER of most common tags</span><span class="s2">&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nv">Counter</span><span class="ss">(</span><span class="nv">tags</span><span class="ss">)</span>.<span class="nv">most_common</span><span class="ss">(</span><span class="nv">TOP_NUMBER</span><span class="ss">)</span>
</pre></div>


</li>
<li>
<p>For similarities we were going to read up on <a href="http://www.nltk.org/">NLTK</a> but stdlib has difflib.SequenceMatcher which makes this very easy (found <a href="http://stackoverflow.com/questions/17388213/find-the-similarity-percent-between-two-strings">on Stackoverflow</a>). We gained quite some performance first matching the first char between tags, but this assumes the first char is always the same. If you don't want that, take that check out. We use itertools.product instead of a double for loop. Lastly yield makes get_similarities a generator which we find more Pythonic.</p>
<div class="highlight"><pre><span></span><span class="nv">def</span> <span class="nv">get_similarities</span><span class="ss">(</span><span class="nv">tags</span><span class="ss">)</span>:
    <span class="s2">&quot;&quot;&quot;</span><span class="s">Find set of tags pairs with similarity ratio of &gt; SIMILAR</span><span class="s2">&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="nv">pair</span> <span class="nv">in</span> <span class="nv">product</span><span class="ss">(</span><span class="nv">tags</span>, <span class="nv">tags</span><span class="ss">)</span>:
        # <span class="nv">performance</span> <span class="nv">enhancements</span> <span class="mi">1</span>.<span class="mi">992</span><span class="nv">s</span> <span class="o">-&gt;</span> <span class="mi">0</span>.<span class="mi">144</span><span class="nv">s</span>
        <span class="k">if</span> <span class="nv">pair</span>[<span class="mi">0</span>][<span class="mi">0</span>] <span class="o">!=</span> <span class="nv">pair</span>[<span class="mi">1</span>][<span class="mi">0</span>]:
            <span class="k">continue</span>
        <span class="nv">pair</span> <span class="o">=</span> <span class="nv">tuple</span><span class="ss">(</span><span class="nv">sorted</span><span class="ss">(</span><span class="nv">pair</span><span class="ss">))</span>  # <span class="nv">set</span> <span class="nv">needs</span> <span class="nv">hashable</span> <span class="nv">type</span>
        <span class="nv">similarity</span> <span class="o">=</span> <span class="nv">SequenceMatcher</span><span class="ss">(</span><span class="nv">None</span>, <span class="o">*</span><span class="nv">pair</span><span class="ss">)</span>.<span class="nv">ratio</span><span class="ss">()</span>
        <span class="k">if</span> <span class="nv">SIMILAR</span> <span class="o">&lt;</span> <span class="nv">similarity</span> <span class="o">&lt;</span> <span class="nv">IDENTICAL</span>:
            <span class="nv">yield</span> <span class="nv">pair</span>
</pre></div>


</li>
<li>
<p>The calling code was given, printing it here for completeness:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="nv">__name__</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">__main__</span><span class="s2">&quot;</span>:
    <span class="nv">tags</span> <span class="o">=</span> <span class="nv">get_tags</span><span class="ss">()</span>
    <span class="nv">top_tags</span> <span class="o">=</span> <span class="nv">get_top_tags</span><span class="ss">(</span><span class="nv">tags</span><span class="ss">)</span>
    <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">* Top {} tags:</span><span class="s1">&#39;</span>.<span class="nv">format</span><span class="ss">(</span><span class="nv">TOP_NUMBER</span><span class="ss">))</span>
    <span class="k">for</span> <span class="nv">tag</span>, <span class="nv">count</span> <span class="nv">in</span> <span class="nv">top_tags</span>:
        <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">{:&lt;20} {}</span><span class="s1">&#39;</span>.<span class="nv">format</span><span class="ss">(</span><span class="nv">tag</span>, <span class="nv">count</span><span class="ss">))</span>
    <span class="nv">similar_tags</span> <span class="o">=</span> <span class="nv">dict</span><span class="ss">(</span><span class="nv">get_similarities</span><span class="ss">(</span><span class="nv">tags</span><span class="ss">))</span>
    <span class="nv">print</span><span class="ss">()</span>
    <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">* Similar tags:</span><span class="s1">&#39;</span><span class="ss">)</span>
    <span class="k">for</span> <span class="nv">singular</span>, <span class="nv">plural</span> <span class="nv">in</span> <span class="nv">similar_tags</span>.<span class="nv">items</span><span class="ss">()</span>:
        <span class="nv">print</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">{:&lt;20} {}</span><span class="s1">&#39;</span>.<span class="nv">format</span><span class="ss">(</span><span class="nv">singular</span>, <span class="nv">plural</span><span class="ss">))</span>
</pre></div>


</li>
<li>
<p>Tests pass:</p>
<div class="highlight"><pre><span></span>$ git checkout solutions
$ python test_tags.py 
...
----------------------------------------------------------------------
Ran <span class="m">3</span> tests in <span class="m">0</span>.153s

OK
</pre></div>


</li>
</ul>
<hr>
<h2>Code challenges != Python's 'preferably only one way'</h2>
<p>We know '&gt;&gt;&gt; import this' says: "There should be one-- and preferably only one --obvious way to do it." and usually there is. Yet for our challenges we encourage people to be creative and not stick to the template + tests per se (we improve the code challenge format as we learn ...). </p>
<p>For example Jeffrey parses our feed directly in <a href="https://gist.github.com/jrjames83/eeda4324116dde12ea8d45c47a151ab0">his solution</a> with requests and BeautifulSoup not stripping off the dash. This is great addition to our solution, using PyPI whenever you can is recommended. Also by parsing the live feed he created us a tool to run this check every now and then (thanks Jeffrey). We like to see different solutions.</p>
<h2>Any issues or feedback?</h2>
<p>What did you learn this challenge? Feel free to share you code in the comments below. </p>
<p>How are you experiencing these challenges? You like the format? What can we do differently and/or better?</p>
<h2>next(challenges)</h2>
<p>Monday we will be back with a fresh new challenge, stay tuned ...</p>
<p>Again to start coding <a href="https://github.com/pybites/challenges">fork our challenges repo</a> or <a href="https://help.github.com/articles/syncing-a-fork/">sync it</a> if you already forked it.</p>
  </div>

  <hr>
  <p><strong>See an error in this post? Please submit a pull request <a href='https://github.com/pybites/pybites.github.io-src' target='_blank'>on Github.</a></strong></p>

  <div class="tag-cloud">
    <p>
      <a href="https://pybit.es/tag/codechallenges.html">codechallenges</a>
      <a href="https://pybit.es/tag/code-review.html">code review</a>
      <a href="https://pybit.es/tag/github.html">github</a>
      <a href="https://pybit.es/tag/learning.html">learning</a>
      <a href="https://pybit.es/tag/tags.html">tags</a>
      <a href="https://pybit.es/tag/similarity.html">similarity</a>
      <a href="https://pybit.es/tag/blog.html">blog</a>
    </p>
  </div>

  <div class="center social-share">
    <p>    Like this article? Share it with your friends!
</p>
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
  </div>



<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'http-pybit-es';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
</article>

    <footer>
<p>&copy; pybites </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89294245-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

	<script>window.twttr = (function(d, s, id) {
	var js, fjs = d.getElementsByTagName(s)[0],
		t = window.twttr || {};
	if (d.getElementById(id)) return t;
	js = d.createElement(s);
	js.id = id;
	js.src = "https://platform.twitter.com/widgets.js";
	fjs.parentNode.insertBefore(js, fjs);
	t._e = [];
	t.ready = function(f) {
		t._e.push(f);
	};
	return t;
	}(document, "script", "twitter-wjs"));</script>

  <script async defer src="https://buttons.github.io/buttons.js"></script>
	
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5859c6a67eb6254d" async="async"></script>


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " PyBites ",
  "url" : "https://pybit.es",
  "image": "https://pybit.es/theme/img/profile.png",
  "description": "A Community that Masters Python through Code Challenges"
}
</script>
</body>
</html>